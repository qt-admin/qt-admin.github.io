import{d as $,r as x,a as V,f as u,o as y,k as E,w as n,e,h as C,_ as M,l as I,m as O,c as U,b as F,n as W,u as H,E as z,F as P,q as L,R as j,v as G,x as T,y as Y,z as Z,i as X,B as ee}from"./index--nBzsfPe.js";const q="",B={getUserList:`${q}/api/user/get-user-list`,userAdd:`${q}/api/user/add`,userEdit:`${q}/api/user/edit`},te=$({__name:"filter-area",emits:["search"],setup(S,{emit:g}){const N=g,t=x({userName:"",phone:"",gender:"",createDate:""}),i=V();function d(){var f;(f=i.value)==null||f.resetFields()}function r(){N("search",t)}return(f,o)=>{const v=u("el-input"),_=u("el-form-item"),w=u("el-option"),a=u("el-select"),m=u("el-date-picker"),b=u("el-button"),k=u("el-form");return y(),E(k,{ref_key:"filterRef",ref:i,model:t,inline:!0,"label-width":"80px"},{default:n(()=>[e(_,{label:"用户名",prop:"userName"},{default:n(()=>[e(v,{modelValue:t.userName,"onUpdate:modelValue":o[0]||(o[0]=s=>t.userName=s),class:"important-w-180",placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"手机号",prop:"phone"},{default:n(()=>[e(v,{modelValue:t.phone,"onUpdate:modelValue":o[1]||(o[1]=s=>t.phone=s),modelModifiers:{number:!0},class:"important-w-180",placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{label:"性别",prop:"gender"},{default:n(()=>[e(a,{modelValue:t.gender,"onUpdate:modelValue":o[2]||(o[2]=s=>t.gender=s),class:"important-w-180",placeholder:"请选择",clearable:""},{default:n(()=>[e(w,{label:"未知",value:"0"}),e(w,{label:"男",value:"1"}),e(w,{label:"女",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"创建日期",prop:"createDate"},{default:n(()=>[e(m,{modelValue:t.createDate,"onUpdate:modelValue":o[3]||(o[3]=s=>t.createDate=s),class:"important-w-180",type:"date",placeholder:"请选择",clearable:""},null,8,["modelValue"])]),_:1}),e(_,{class:"form-item-operation"},{default:n(()=>[e(b,{onClick:d},{default:n(()=>[C("重置")]),_:1}),e(b,{type:"primary",onClick:r},{default:n(()=>[C("查询")]),_:1})]),_:1})]),_:1},8,["model"])}}}),ae=M(te,[["__scopeId","data-v-e0c945cc"]]),le={class:"pb-10"},ne={class:"pt-20 flex flex-justify-center"},oe=$({__name:"table-area",props:{data:{default:()=>[]},pagination:{default:()=>({pageNum:1,pageSize:10,total:100})}},emits:["size-change","current-change","add","edit"],setup(S,{emit:g}){const N=I(),t=g,i=V("total, sizes, prev, pager, next, jumper");return O(()=>N.isSidebarHide,d=>{d?i.value="total, pager":i.value="total, sizes, prev, pager, next, jumper"}),(d,r)=>{const f=u("el-button"),o=u("el-table-column"),v=u("el-tag"),_=u("el-table"),w=u("el-pagination");return y(),U(P,null,[F("div",le,[e(f,{type:"primary",onClick:r[0]||(r[0]=a=>t("add"))},{default:n(()=>[C("新增")]),_:1})]),e(_,{data:d.data,"max-height":"350px"},{default:n(()=>[e(o,{type:"index",label:"序号",width:"60"}),e(o,{prop:"user_id",label:"用户id",width:"100"}),e(o,{prop:"user_name",label:"用户名",width:"100"}),e(o,{prop:"nickname",label:"用户昵称",width:"100"}),e(o,{prop:"department",label:"所属部门",width:"100"}),e(o,{prop:"phone",label:"手机号",width:"150"}),e(o,{prop:"email",label:"邮箱","min-width":"150"}),e(o,{label:"状态",width:"100"},{default:n(({row:a})=>[e(v,{type:a.status===1?"success":"danger"},{default:n(()=>[C(W(a.status===1?"启用":"停用"),1)]),_:2},1032,["type"])]),_:1}),e(o,{fixed:"right",label:"操作","min-width":"120"},{default:n(({row:a})=>[e(f,{link:"",type:"primary",size:"small",onClick:r[1]||(r[1]=m=>H(z).warning("待开发"))},{default:n(()=>[C("详情")]),_:1}),e(f,{link:"",type:"primary",size:"small",onClick:m=>t("edit",a)},{default:n(()=>[C("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),F("div",ne,[e(w,{"current-page":d.pagination.pageNum,"onUpdate:currentPage":r[2]||(r[2]=a=>d.pagination.pageNum=a),"page-size":d.pagination.pageSize,"onUpdate:pageSize":r[3]||(r[3]=a=>d.pagination.pageSize=a),"page-sizes":[10,20,50,100],small:"",disabled:!1,background:!0,layout:i.value,total:d.pagination.total,onSizeChange:r[4]||(r[4]=a=>t("size-change",a)),onCurrentChange:r[5]||(r[5]=a=>t("current-change",a))},null,8,["current-page","page-size","layout","total"])])],64)}}}),re={class:"form-footer"},se=$({__name:"form-popup",props:{visible:{type:Boolean,default:!1},row:{default:()=>({})}},emits:["update:visible","refresh"],setup(S,{emit:g}){const N=I(),t=x({userName:"",nickName:"",department:"",phone:"",email:"",status:0}),i=S,d=g,r=L({get(){return i.visible},set(s){d("update:visible",s)}}),f=L(()=>!!i.row.user_id);O(()=>i.visible,s=>{const l=i.row;s&&i.row&&Object.keys(i.row).length&&(t.userName=l.user_name,t.nickName=l.nickname,t.department=l.department,t.phone=l.phone,t.email=l.email,t.status=l.status)});const o=V([{id:"001",name:"测试部门"},{id:"002",name:"研发部门"},{id:"003",name:"设计部门"},{id:"004",name:"职能部门"},{id:"005",name:"后勤部门"}]),v=x({userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}],department:[{required:!0,message:"请选择部门",trigger:"change"}],phone:[{required:!0,validator:_,trigger:"blur"}],email:[{required:!0,validator:w,trigger:"blur"}],status:[{required:!0,message:"请选择停启用状态",trigger:"change"}]});function _(s,l,c){if(!l)return c(new Error("请输入手机号"));if(!j.PHONE.test(l))return c(new Error("手机号格式不正确"));c()}function w(s,l,c){if(!l)return c(new Error("请输入邮箱"));if(!j.EMAIL.test(l))return c(new Error("邮箱格式不正确"));c()}const a=V(),m=V(!1);function b(){var s;r.value=!1,(s=a.value)==null||s.resetFields()}function k(){var s;(s=a.value)==null||s.validate(l=>{if(!l)return;const c={user_name:t.userName,nickname:t.nickName,department:t.department,phone:t.phone,email:t.email,status:t.status};f.value&&(c.user_id=i.row.user_id),m.value=!0,X.post(f.value?B.userEdit:B.userAdd,c).then(h=>{m.value=!1;const{message:R,success:D}=h||{};if(!D){z.error(R||"服务器错误");return}z.success(`${f.value?"编辑":"新增"}成功`),d("refresh"),b()}).catch(h=>{z.error(h||"服务器错误"),m.value=!1})})}return(s,l)=>{const c=u("el-input"),h=u("el-form-item"),R=u("el-option"),D=u("el-select"),J=u("el-switch"),K=u("el-form"),A=u("el-button"),Q=G("loading");return y(),E(Z(H(N).formMode==="dialog"?"el-dialog":"el-drawer"),{modelValue:r.value,"onUpdate:modelValue":l[6]||(l[6]=p=>r.value=p),title:f.value?"编辑":"新增",size:620,width:620,class:"relative",onClosed:b},{default:n(()=>[T((y(),E(K,{ref_key:"formRef",ref:a,model:t,rules:v,class:"pl-40 pb-60","label-width":"150px","label-position":"left"},{default:n(()=>[e(h,{label:"用户名",prop:"userName"},{default:n(()=>[e(c,{modelValue:t.userName,"onUpdate:modelValue":l[0]||(l[0]=p=>t.userName=p),placeholder:"请输入",maxlength:20,clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"昵称",prop:"nickName"},{default:n(()=>[e(c,{modelValue:t.nickName,"onUpdate:modelValue":l[1]||(l[1]=p=>t.nickName=p),placeholder:"请输入",maxlength:20,clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"部门",prop:"department"},{default:n(()=>[e(D,{modelValue:t.department,"onUpdate:modelValue":l[2]||(l[2]=p=>t.department=p),placeholder:"请选择",clearable:""},{default:n(()=>[(y(!0),U(P,null,Y(o.value,p=>(y(),E(R,{key:p.id,label:p.name,value:p.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"手机号",prop:"phone"},{default:n(()=>[e(c,{modelValue:t.phone,"onUpdate:modelValue":l[3]||(l[3]=p=>t.phone=p),placeholder:"请输入",maxlength:11,clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"邮箱",prop:"email"},{default:n(()=>[e(c,{modelValue:t.email,"onUpdate:modelValue":l[4]||(l[4]=p=>t.email=p),placeholder:"请输入",maxlength:30,clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"状态",prop:"status"},{default:n(()=>[e(J,{modelValue:t.status,"onUpdate:modelValue":l[5]||(l[5]=p=>t.status=p),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"启用","inactive-text":"停用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[Q,m.value]]),F("footer",re,[e(A,{onClick:b},{default:n(()=>[C("关闭")]),_:1}),e(A,{loading:m.value,type:"primary",onClick:k},{default:n(()=>[C("确定")]),_:1},8,["loading"])])]),_:1},40,["modelValue","title"])}}}),ie=M(se,[["__scopeId","data-v-7f8d9862"]]),de=$({__name:"table-basic",setup(S){const g=x({pageNum:1,pageSize:10,total:100}),N=x({}),t=V([]),i=V(!1),d=V(!1),r=V({});function f(a){g.pageSize=a,v()}function o(a){g.pageNum=a,v()}function v(){i.value=!0,X.post(B.getUserList,{pageNum:g.pageNum,pageSize:g.pageSize,...N}).then(a=>{i.value=!1;const{data:m,message:b,success:k}=a||{};if(!k){z.error(b||"服务器错误");return}t.value=m||[]}).catch(a=>{z.error(a||"服务器错误"),i.value=!1})}function _(a){Object.assign(N,a||{}),g.pageNum=1,v()}function w(a){r.value=a,d.value=!0}return ee(()=>{v()}),(a,m)=>{const b=G("loading");return y(),U(P,null,[e(ae,{onSearch:_}),T((y(),U("div",null,[e(oe,{data:t.value,pagination:g,onSizeChange:f,onCurrentChange:o,onAdd:m[0]||(m[0]=k=>d.value=!0),onEdit:w},null,8,["data","pagination"])])),[[b,i.value]]),e(ie,{visible:d.value,"onUpdate:visible":m[1]||(m[1]=k=>d.value=k),row:r.value,onRefresh:_},null,8,["visible","row"])],64)}}});export{de as default};
